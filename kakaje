-- Gui to Lua
-- Version: 3.2

local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local HttpService = game:GetService("HttpService")

local ScreenGui = Instance.new("ScreenGui")
local Executor = Instance.new("Frame")
local UICorner = Instance.new("UICorner")
local TopBar = Instance.new("TextLabel")
local UICorner_2 = Instance.new("UICorner")
local UIAspectRatioConstraint = Instance.new("UIAspectRatioConstraint")
local Down = Instance.new("Frame")
local UICorner_3 = Instance.new("UICorner")
local UIAspectRatioConstraint_2 = Instance.new("UIAspectRatioConstraint")
local EditorScroller = Instance.new("ScrollingFrame")
local Editor = Instance.new("TextBox")
local UIAspectRatioConstraint_3 = Instance.new("UIAspectRatioConstraint")
local UIAspectRatioConstraint_4 = Instance.new("UIAspectRatioConstraint")
local ScriptTab = Instance.new("Frame")
local UICorner_4 = Instance.new("UICorner")
local UIAspectRatioConstraint_5 = Instance.new("UIAspectRatioConstraint")
local Execute = Instance.new("TextButton")
local UICorner_5 = Instance.new("UICorner")
local Clear = Instance.new("TextButton")
local UICorner_6 = Instance.new("UICorner")
local Save = Instance.new("TextButton")
local UICorner_7 = Instance.new("UICorner")

ScreenGui.Parent = game.CoreGui
ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

Executor.Name = "Ghost Killr"
Executor.Parent = ScreenGui
Executor.BackgroundColor3 = Color3.fromRGB(12, 4, 20)
Executor.BackgroundTransparency = 0.120
Executor.Position = UDim2.new(0.307999998, 0, 0.26199996, 0)
Executor.Size = UDim2.new(0, 481, 0, 287)
Executor.Active = true
Executor.Draggable = true

UICorner.Parent = Executor

TopBar.Name = "TopBar"
TopBar.Parent = Executor
TopBar.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
TopBar.BackgroundTransparency = 0.600
TopBar.Size = UDim2.new(0, 481, 0, 35)
TopBar.Font = Enum.Font.SourceSansItalic
TopBar.Text = "Ghost Killr Executor"
TopBar.TextColor3 = Color3.fromRGB(255, 255, 255)
TopBar.TextSize = 25.000

UICorner_2.Parent = TopBar
UIAspectRatioConstraint.Parent = TopBar

-- دعم تغيير الحجم يدوياً
local function ResizeUI()
	Executor.Size = UDim2.new(0, 500, 0, 320)
end
UserInputService.InputBegan:Connect(function(input)
	if input.UserInputType == Enum.UserInputType.MouseButton2 then
		ResizeUI()
	end
end)

-- تأثيرات الضغط على الأزرار
local function ButtonEffect(button)
	local tween = TweenService:Create(button, TweenInfo.new(0.2, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {BackgroundTransparency = 0.3})
	button.MouseButton1Down:Connect(function()
		tween:Play()
	end)
	button.MouseButton1Up:Connect(function()
		TweenService:Create(button, TweenInfo.new(0.2), {BackgroundTransparency = 0.6}):Play()
	end)
end
ButtonEffect(Execute)
ButtonEffect(Clear)
ButtonEffect(Save)

-- تحميل أكثر من سكربت
local function LoadScripts(scriptTable)
	for _, scriptText in pairs(scriptTable) do
		assert(loadstring(scriptText))()
	end
end

-- زر تنفيذ
Execute.MouseButton1Click:Connect(function()
	assert(loadstring(Editor.Text))()
end)

-- زر الحذف
Clear.MouseButton1Click:Connect(function()
	Editor.Text = ""
end)

-- زر الحفظ
Save.MouseButton1Click:Connect(function()
	local savedScript = Editor.Text
	writefile("GhostKillrScript.lua", savedScript)
end)

-- سجل المحفوظات
local history = {}
local function AddToHistory(scriptText)
	table.insert(history, scriptText)
end

-- التراجع والإعادة
local undoStack, redoStack = {}, {}
local function Undo()
	if #undoStack > 0 then
		table.insert(redoStack, Editor.Text)
		Editor.Text = table.remove(undoStack)
	end
end
local function Redo()
	if #redoStack > 0 then
		table.insert(undoStack, Editor.Text)
		Editor.Text = table.remove(redoStack)
	end
end

UserInputService.InputBegan:Connect(function(input, gameProcessed)
	if not gameProcessed then
		if input.KeyCode == Enum.KeyCode.Z and UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) then
			Undo()
		elseif input.KeyCode == Enum.KeyCode.Y and UserInputService:IsKeyDown(Enum.KeyCode.LeftControl) then
			Redo()
		end
	end
end)

-- مشاركة السكربت عبر QR Code
local function GenerateQRCode(scriptText)
	local encoded = HttpService:UrlEncode(scriptText)
	return "https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=" .. encoded
end

-- إضافة تأثيرات Blur عند التشغيل
local blur = Instance.new("BlurEffect", game.Lighting)
blur.Size = 10

-- دعم Syntax Highlighting
Editor.TextWrapped = true
Editor.TextScaled = true
Editor.ClearTextOnFocus = false
Editor.TextColor3 = Color3.fromRGB(255, 255, 255)

-- إضافة Dark Mode و Light Mode
local function ToggleTheme(isDarkMode)
	if isDarkMode then
		Executor.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
		TopBar.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
		Editor.TextColor3 = Color3.fromRGB(255, 255, 255)
	else
		Executor.BackgroundColor3 = Color3.fromRGB(220, 220, 220)
		TopBar.BackgroundColor3 = Color3.fromRGB(200, 200, 200)
		Editor.TextColor3 = Color3.fromRGB(0, 0, 0)
	end
end

print("Ghost Killr Executor Loaded!")
